泛用决策AI之三国杀案例

# 流程

## 基本流程

http://blog.sina.com.cn/s/blog_60c5057e0100xvww.html

以上只是参考我们有比他更好的模型

结算流程虽然可以被另一个流程打断，但注意一点，无论何时界面上只有一个流程在结算。

显然这是一个栈模型。


## 具体卡牌流程

## 技能流程

## 复杂结算流程

https://tieba.baidu.com/p/1093814340?pn=1

https://tieba.baidu.com/f?kz=976429719&red_tag=0986191290

http://www.e3ol.com/news/html/2011-4/27115/27115_2011418.shtml

# 前后端协作
锁定与非锁定技能都可以看做是向对方询问，只不过锁定技百分百回答触发。

例子一：黄盖杀法正，法正发动八卦，司马懿改判定，法正掉血发动恩怨，黄盖掉体力摸排，法正队友蔡文姬判定，黄盖队友司马懿改派。

回合内：
决定发动技能->询问后台技能要素（选择手牌-手牌合法目标-或者选择英雄-英雄合法目标- 这里似乎有个DSL）->动画过程：逐一满足技能要素（或随时终止）--确定发动技能

--决定影响：将这一决定通知全局（有响应则压栈处理）--决定影响处理完---动画执行决定--决定完成事件影响（全局通知）---有响应则压栈处理。

回合外：收到事件通知-> 剩下的与回合内类似。

例子二：五谷丰登。将出牌看做一个技能，因此也是决定发动技能->询问后台技能要素。->满足之后确定->展示五谷丰登8张牌-->到此五谷丰登发动结束-->通知技能影响，

首先是通知自己-->决定拿牌-->决定影响-->。。之后的就类似了。

例子三：万箭齐发。类似上面。

例子四：拼点

例子五：火攻


整个协作过程要素抽象。

通知事件发生（动画已经作为上一个事件的过程处理完毕（动画展示即为通知，因为我们在模拟多个人玩这游戏，人自能看见））

-->（玩家对事件尝试响应，需要询问后台相应流程与合法目标，动画过程展示满足目标过程，确定发出相应决定）-->决定的影响通知-->决定的动画-->决定的结果通知。


进一步基本抽象：

事件与过程指导： 事件描述静态状态， 过程指导描述动态变化。



# 前端界面

# 后端

现实与构想如何标识？

远景：董卓杀蔡文姬长远来看是正收益

损益判断

因果关联 追溯原因

理解意图来判断状态：
比如张飞出了一张杀之后丢牌过，应能分析出张飞没有杀了，
因为一般情况系下，从张飞利益最大化的角度判断，张飞应该连杀。
二班情况就是场上有明牌南蛮等，张飞从自身血量考虑选择留一张杀。
这些都是张飞的意图判断。

判断别人的意图要换位思考。

换位思考之前要先做到能考虑清楚自我的利益最大化。

换位思考要考虑大家知道的信息不同。大家的信息差异如何在一人的脑中分别标识。


自我利益的最大化不仅仅是求一个值，更是求一个路径，这里应该是某种非顺序的、启发式的方法。




