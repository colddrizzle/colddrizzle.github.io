我们知道，关联是链接的集合。而链接是两边对象笛卡尔乘积的子集？？

不管是多重性也好，聚合组合也好，对关联的命名方式都是对其中具体某一个链接的描述。

聚合是一种特殊的一对多关系，其几乎意味着关联两端存在天然的包含关系，具有层级意味。
  其中一端是另一端的概念组成部分
  其中一端是另一端的物理组成部分

而其余的一对多关系则则更平面一些。


当我们说关联的时候，其实默认是双向的，从双向性上来审查的话，平时我们说的一对一、一对多、多对多
的准确描述应该分别是
    从左到右的一对一关系与从右到左的一对一关系
    从左到右的一对多关系与从右到左的一对一关系
    从左到右的一对多关系与从右到左的一对多关系


不可分解的三元关系转化为二元关系的时候就已经不是三元关系了，不要用两两二元关系来考虑三元关系。
那么不可分解的三元关系到底意味着什么？

想法：
按照UML手册的说法，UML类图是有明确的分析、设计、实现阶段的，那么各个阶段应该做的事情是什么
分析是分析领域问题，设计是做图，实现是代码层面。

关联是有方向性的，但是关联不应该等同于任何实现层面的东西比如指针，关联的方向性仅仅表示这种关联语义从某一个方向是有意义的，但反过来不行。建模并不是对真实世界的建模，而是对解决问题方案建模，因此所谓有没有意义的判断就是有没有助于我们解决问题。比如虽然现实中确实一个地址会有很多人，但是我们不关心这一点的话，那么地址到人的关联就是无意义的，但如何问题层面有根据地址统计人的需求的话，那么这种关联就必须是有意义的。这是一个如何用设计解决问题的问题。

因此，两个对象之间链接的数目计算并不需要考虑方向性，因为计算之前，关联的方向性就在设计阶段确定了。

根据UML2.0手册，关联、泛化都是依赖关系，只是是有特殊语义的依赖关系，从而独立出来。


# UML2.0之类图

该系列试图将UML2.0的精要做一个相对完整且比较实用的梳理。梳理后UML各种部分、图将呈现出一个清晰的逻辑关系，能够有的放矢、恰如其分的使用UML工具就是最终目的。主要参考资料是官方《UML2.0参考手册》与《UML面向对象建模与设计》第二版。

## 一、类图在UML中位置
  UML2.0中分为动态视图与静态视图两种。静态视图的关键部分是分类器（Classfiers）和他们的关系(relationships)。分类器其实就是指的各种静态视图中的偏向实体的那部分，比如用户、包、机房、类、接口等等。显然类图属于静态视图。在类图中，关系（relationships）包括关联、泛化、依赖三种。

## 二、类图的组成

### 1、分类器
#### 普通类
##### “实体类”
##### 枚举
##### 接口
##### 抽象类

#### 关联类
之所以单独列出关联类，是因为关联类在我们后面讲的一次循环游走与OCL遍历下有着特殊的地方。其本身也应该区分于被提升为类的关联，主要是要区分二者的使用场合，但是更多的情况是关联类是被提升的类的关联的一种聚合。

### 2、关系

  首先注意泛化与依赖不是关联。他们是并列的，都属于关系。并且，**只有关联是描述的对象之间的关系，而泛化与依赖描述分类器之间的关系**

#### 关联
* **链接与关联**
**链接是参与方共有的属性，不要想当然把它理解为2方关联。在N元关联中，链接看起来并不直观。**

关联是链接的集合，一个有趣的问题是，N元链接的数目问题？

* **关联方向性** 关联本质上没有方向性。二元关联是最容易让人误会关联有方向性。不存在单向关联。看起来有方向只是我们的读取方式，看起来是单向只是因为我们实现成单向引用容易。
那么没有方向的关联，包括二元和三元，在具体实现的时候应该落地成什么样的方向性呢？

* **关联与实际链接缺失**

* **关联多重性**

关联终端(Association ends)属性：角色、可见性、多重性

同一个类可以多次参与一个关联，然而其代表的实际链接中的对象可以是同一个，也可以不是。那么如何在建模中表现这一点呢？

#### 泛化
虽然泛化与继承是一对经常提到的同义词，然而这里我们有必要区分：泛化是一种关系，而继承是这种关系的实现方式（通过共享方法与属性的方式）。
在遍历中，由下层类遍历到上层类是允许的，但是反过来不允许遍历，具体参见锁定域与OCL遍历。
#### 依赖
### 3、约束

## 三、类图上的数学逻辑
### 链接与关联


### 一次循环锁定域
锁定域是一个为了说明这篇文章而暂时起的名字，并非官方概念。

### n元关联的拆分

### 隐藏多重性与环

### OCL语言--你的类图能便捷地表达你所有的业务逻辑吗？

  ***有没有可能利用自然语言处理将用例自动转为ocl表达式***

## 四、类图可能的自助工具

### 关联类提示

### 限定符提示

### 关联多重性冲突

## 五、画类图的正确思考方式
  在完整的应用一个类图的过程中，类会有三层身份。分析阶段身份，设计阶段身份，以及与具体语言相关的实现阶段身份。由于身份不同，思考的角度与粒度不同，因此为了厘清我们的思路，必须循序渐进的去 画类图，也就是先从分析阶段画其轮廓，设计阶段填补细节、考虑效率。最后实现。

  首先应该厘清领域中的概念与关系，类的属性与操作必须在前连个完全确定的情况下再去填补，而不是画一个类，写上属性方法，再画一个类写上属性方法这种。

  实现阶段的类图：需要考虑关联的方向性。不正确的实现方式可能会导致OCL所表达的业务逻辑无法实现。
